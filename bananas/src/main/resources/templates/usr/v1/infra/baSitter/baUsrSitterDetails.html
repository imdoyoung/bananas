<!doctype html>
<html class="no-js" lang="ko" xmlns:th="http://www.thymeleaf.org">


<head>
<meta charset="utf-8">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<title>투개더</title>
<meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" type="image/x-icon"
	href="/usr/v1/template/petxon/assets/img/favicon.ico">
<!-- Place favicon.ico in the root directory -->

<!-- CSS here -->
<link rel="stylesheet"
	href="/usr/v1/template/NailForest/assets/fonts/materialdesign/css/materialdesignicons.css">
<link rel="stylesheet"
	href="/usr/v1/template/NailForest/assets/fonts/materialdesign/css/materialdesignicons.min.css">

<link rel="stylesheet"
	href="/usr/v1/template/petxon/assets/css/bootstrap.min.css">
<link rel="stylesheet"
	href="/usr/v1/template/petxon/assets/css/animate.min.css">
<link rel="stylesheet"
	href="/usr/v1/template/petxon/assets/css/magnific-popup.css">
<link rel="stylesheet"
	href="/usr/v1/template/petxon/assets/fontawesome/css/all.min.css">
<link rel="stylesheet"
	href="/usr/v1/template/petxon/assets/fontawesome-pro/css/all.min.css">
<link rel="stylesheet"
	href="/usr/v1/template/petxon/assets/css/dripicons.css">
<link rel="stylesheet"
	href="/usr/v1/template/petxon/assets/css/slick.css">
<link rel="stylesheet"
	href="/usr/v1/template/petxon/assets/css/meanmenu.css">
<link rel="stylesheet"
	href="/usr/v1/template/petxon/assets/css/swiper.min.css">
<link rel="stylesheet"
	href="/usr/v1/template/petxon/assets/css/default.css">
<link rel="stylesheet"
	href="/usr/v1/template/petxon/assets/css/style.css">
<link rel="stylesheet"
	href="/usr/v1/template/petxon/assets/css/responsive.css">

<link
	href="/usr/v1/template/NailForest/assets/libs/magnific-popup/dist/magnific-popup.css"
	rel="stylesheet" />
<link
	href="/usr/v1/template/NailForest/assets/libs/animate.css/animate.min.css"
	rel="stylesheet">
<link
	href="/usr/v1/template/NailForest/assets/libs/nouislider/dist/nouislider.min.css"
	rel="stylesheet">
<link
	href="/usr/v1/template/NailForest/assets/libs/uppy/dist/uppy.min.css"
	rel="stylesheet">
<link
	href="/usr/v1/template/NailForest/assets/libs/litepicker/dist/css/litepicker.css"
	rel="stylesheet">
<link
	href="/usr/v1/template/NailForest/assets/libs/simplebar/dist/simplebar.min.css"
	rel="stylesheet">

<link rel="stylesheet"
	href="/xdm/v1/css/datetimepicker/jquery.datetimepicker.min.css">
</head>

<style>
/* 별점 컨테이너 */
.rating {
	font-size: 30px;
	color: #d3d3d3;
	/* 비활성 별의 색 */
	cursor: pointer;
}

/* 별점 hover 시 스타일 */
.rating .star:hover, .rating .star.hover {
	color: gold;
}

/* 선택된 별의 색 */
.rating .star.selected {
	color: gold;
}

/* 평점 표시 부분 */
#selectedRating {
	font-weight: bold;
}
/* shop_detail 페이지 메뉴 checkbox CSS start */
/* 기본 스타일 */
.custom-checkbox {
	color: #6c757d;
	background-color: #fff;
	border: 2px solid #F69946;
	padding: 0px;
	cursor: pointer;
	display: flex;
	flex-direction: column;
	border-radius: 4px; /* 선택 사항: 모서리 둥글게 하기 */
	transition: background-color 0.3s, border-color 0.3s, color 0.3s;
	/* 부드러운 전환 효과 */
	box-sizing: border-box; /* padding과 border를 포함하여 전체 크기를 계산합니다 */
}

.content {
	padding: 10px;
	border-radius: 4px; /* 선택 사항: 모서리 둥글게 하기 */
}

/* 체크박스 숨기기 */
.custom-checkbox input[type="checkbox"] {
	display: none;
}

/* 체크박스가 선택된 상태와 마우스 오버 상태에서 label 전체 스타일 변경 */
.custom-checkbox:hover, .custom-checkbox input[type="checkbox"]:checked
	{
	color: #000;
	background-color: #ffdec1; /* 배경색을 label에 직접 적용 */
	border-color: #13653f;
	border: 2px solid #F69946;
}

/* 체크박스가 선택된 상태에서 .content 요소 스타일 */
.custom-checkbox input[type="checkbox"]:checked ~ .content {
	color: #000;
	background-color: #ffdec1; /* 배경색을 label에 직접 적용 */
	border-color: #13653f;
	font-weight: bolder;
}

/* p 태그 스타일 - 내용 왼쪽 정렬 */
.custom-checkbox .align-left {
	text-align: left;
	margin: 0;
	display: flex;
	flex-direction: column;
}

/* 가격과 버튼 그룹을 같은 라인에 배치 */
.custom-checkbox .price-and-buttons {
	display: flex;
	justify-content: space-between;
	align-items: center;
	margin-bottom: 0; /* 불필요한 여백 제거 */
}

/* 가격 스타일 */
.custom-checkbox .price {
	text-align: left;
	display: inline-block;
	margin-right: auto;
}

/* 수량 조절 버튼 */
.custom-checkbox .btn-group {
	display: flex;
	align-items: center;
	gap: 5px;
	margin-bottom: 0; /* 버튼 아래 불필요한 여백 제거 */
}

.sidebar-widget a {
	color: #fff;
}

.sidebar-widget .widget a:hover {
	padding-right: 10px;
}

.sidebar-widget .widget a {
	font-size: 18px;
}
</style>

<body>
	<!--  Preloader  -->
	<div id="preloader">
		<div id="loading"></div>
	</div>
	<!--  Preloader end  -->

	<!-- header -->
	<div th:replace="~{usr/v1/infra/common/header :: header}"></div>
	<!-- header-end -->

	<!-- ======= offcanvas_menu ======= -->
	<div th:replace="~{usr/v1/infra/common/offcanvas_menu :: div}"></div>
	<!-- offcanvas_menu end -->

	<!-- main-area -->
	<main>
		<!-- search-popup -->
		<div class="modal fade bs-example-modal-lg search-bg popup1"
			tabindex="-1" role="dialog">
			<div class="modal-dialog modal-lg" role="document">
				<div class="modal-content search-popup">
					<div class="text-center">
						<a href="#" class="close2" data-dismiss="modal" aria-label="Close">×
							close</a>
					</div>
					<div class="row search-outer">
						<div class="col-md-11">
							<input type="text" placeholder="Search for products..." />
						</div>
						<div class="col-md-1 text-right">
							<a href="#"><i class="fa fa-search" aria-hidden="true"></i></a>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!-- /search-popup -->
		<!-- breadcrumb-area -->
		<section class="breadcrumb-area d-flex align-items-center"
			style="background-image: url(/usr/v1/template/petxon/assets/img/backgroundimg/dogBg07.jpg);">
			<div class="container">
				<div class="row align-items-center">
					<div class="col-xl-12 col-lg-12">
						<div class="breadcrumb-wrap text-left">
							<div class="breadcrumb-title">
								<h2>시터 상세보기</h2>
								<div class="breadcrumb-wrap">
									<nav aria-label="breadcrumb">
										<ol class="breadcrumb">
											<li class="breadcrumb-item"><a href="index.html">Home</a></li>
											<li class="breadcrumb-item active" aria-current="page">Details</li>
										</ol>
									</nav>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</section>
		<!-- breadcrumb-area-end -->
		<!-- inner-blog -->
		<section class="inner-blog b-details-p pt-120 pb-120">
			<div class="container">
				<div class="row">
					<div class="col-lg-8">
						<div class="blog-details-wrap">
							<div class="details__content pb-30">
								<form name="form" id="form" method="post" autocomplete="off"
									enctype="multipart/form-data">

									<h2>Sitter Detail</h2>
									<!--<div class="meta-info">
                                        <ul>
                                            <li><i class="fal fa-eye"></i> 100 Views  </li>
                                            <li><i class="fal fa-comments"></i> 35 Comments</li>
                                            <li><i class="fal fa-calendar-alt"></i> 24th March 2019</li>
                                        </ul>
                                    </div>-->
									<!--<div class="details__content-img">
                                        <img src="img/blog/b_details01.jpg" alt="">
                                    </div>-->
									<figure>
										<img
											src="/usr/v1/template/petxon/assets/img/sitterPictures/sitterWoman03.jpg"
											alt="">
										<h2>시터 한줄소개</h2>
										<p id="basiDesc" th:text="${item?.basiDesc}"></p>
									</figure>
									<div class="row"></div>
								</form>
							</div>
							<div class="posts_navigation pt-35 pb-60">
								<div class="row align-items-center">
									<h5>시터경력</h5>
									<p id="basiCareer" th:text="${item?.basiCareer}"></p>
								</div>
							</div>
							<div class="comment__wrap pb-45">
								<form name="form" method="post" action="/usr/v1/infra/baSitter/baUsrSitterDetails">
									<div class="comment__wrap-title">
										<h5 class="pt-30">Review</h5>
									</div>
									<div class="single__comment mb-35" th:each="relist:${relist}">
										<div class="comments-avatar">
											<img src="/usr/v1/template/petxon/assets/img/blog/comment/c_01.png" alt="">
										</div>
										<div class="comment-text">
											<div class="avatar-name mb-1">
												<!--<h6>ALina</h6>-->
												<span th:if="${relist.bareRegDate != null}" th:text="${${#dates.format(reviewList.reRegDate, 'yyyy-MM-dd HH:mm:ss')}"></span>
												<span th:if="${relist.bareRegDate == null}"></span>
												<div class="rating" id="bareStar">
													<span th:each="i : ${#numbers.sequence(1, 5)}">
														<span th:if="${i <= relist.bareStar}" style="color: gold;">&#9733;</span>
														<span th:if="${i > relist.bareStar}" style="color: gray;">&#9734;</span>
													</span>
												</div>
											</div>
											<p id="bareContents" name="bareContents" th:text="${relist.bareContents}"></p>
										</div>
									</div>
								</form>
							</div>
							<div id="comments" class="comments-area  mt-45">
								<div id="respond" class="comment-respond">
									<h3 id="reply-title" class="comment-reply-title">
										리뷰를 남겨주세요
										<small>
											<a rel="nofollow" id="cancel-comment-reply-link" href="/finco/?p=2112#respond" style="display: none;">Cancel reply</a>
										</small>
									</h3>

									<!--<form action="http://wordpress.zcube.in/finco/wp-comments-post.php" method="post" id="commentform" class="comment-form" novalidate="">-->
									<form method="post" name="ReviewForm" action="/usr/v1/infra/baSitter/baUsrReInst" class="comment-form" novalidate="">
										<div class="rating" id="bareStar">
											<span class="star" data-value="1" id="rating-1"
												th:attr="onclick=|starnum('1')|">&#9733;</span>
												<span class="star" data-value="2" id="rating-2"
												th:attr="onclick=|starnum('2')|">&#9733;</span>
												<span class="star" data-value="3" id="rating-3"
												th:attr="onclick=|starnum('3')|">&#9733;</span>
												<span class="star" data-value="4" id="rating-4"
												th:attr="onclick=|starnum('4')|">&#9733;</span>
												<span class="star" data-value="5" id="rating-5"
												th:attr="onclick=|starnum('5')|">&#9733;</span>
										</div>
										<div style="width: 300px; height: 50px;"></div>
										<!--<p class="comment-notes"><span id="email-notes">Your email address will not be published.</span> Required fields are marked <span class="required">*</span></p>-->
										<!--<p class="comment-field"><i class="fas fa-user"></i><input id="author"
												placeholder="Your Name" name="author" type="text"></p>
										<p class="comment-field"><i class="fas fa-envelope"></i><input id="email" placeholder="your-real-email@example.com" name="email" type="text"></p>-->
										<!--<p class="comment-field"><i class="fas fa-globe"></i><input id="url" name="url" placeholder="http://your-site-name.com" type="text"> </p>-->
										<p class="comment-form-comment">
											<label for="bareContents">Comment</label>
											<textarea id="bareContents" name="bareContents" cols="45" rows="8"
												maxlength="65525" required="required"></textarea>
										</p>
										<button type="submit" class="btn btn-brown mt-25" data-animation="fadeInLeft" data-delay=".4s" id="reviewSaveBtn">
											<img src="/usr/v1/template/petxon/assets/img/icon/btn-pet-icon3.png" alt="logo">리뷰쓰기
										</button>
											<input type="hidden" name="bareStar" id="reStarInput">
											<div id="hiddenData" data-basi-seq="${basiSeq}"></div>
											<input type="hidden" name="basiSeq" value="">
<!-- 										<input type="hidden" name="comment_post_ID" value="2112" id="comment_post_ID"> -->
<!-- 										<input type="hidden" name="comment_parent" id="comment_parent" value="0"> -->
										</p>
									</form>
								</div>
								<!-- #respond -->
							</div>
						</div>
					</div>
					<!-- #right side -->
					<div class="col-sm-12 col-md-12 col-lg-4">
						<aside class="sidebar-widget">
							<!-- <section id="search-3" class="widget widget_search">
                                 <h2 class="widget-title">Search</h2>
                                 <form role="search" method="get" class="search-form" action="http://wordpress.zcube.in/finco/">
                                    <label>
                                    <span class="screen-reader-text">Search for:</span>
                                    <input type="search" class="search-field" placeholder="Search &hellip;" value="" name="s" />
                                    </label>
                                    <input type="submit" class="search-submit" value="Search" />
                                 </form>
                              </section>-->
							<section id="custom_html-5"
								class="widget_text widget widget_custom_html">
								<form name="form" id="form" method="post" autocomplete="off" enctype="multipart/form-data">
									<h2 class="widget-title" id="basiName" th:text="${item?.basiName}"></h2>
									<div class="textwidget custom-html-widget">
										<ul>
											<li>
												<div class="icon">
													<i class="fal fa-envelope"></i> <strong>Email</strong>
												</div>
												<div class="text" id="basiEmail"
													th:text="${item?.basiEmail}"></div>
											</li>
											<li>
												<div class="icon">
													<i class="fal fa-phone"></i> <strong>전화번호</strong>
												</div>
												<div class="text" id="basiTel" th:text="${item?.basiTel}"></div>
											</li>
											<li>
												<div class="icon">
													<i class="fal fa-map-marker-alt"></i><strong>주소</strong>
												</div>
												<div class="text" id="basiAddr" th:text="${item?.basiAddr}"></div>
											</li>
										</ul>
									</div>
								</form>
							</section>
							<section id="tag_cloud-1" class="widget widget_tag_cloud">
								<h2 class="widget-title">예약하기</h2>
								<!-- <div class="tagcloud">-->
								<!-- listing detail -->
								<div>
									<div>
										<form name="bookingForm" id="bookingForm" method="post" action="/usr/v1/infra/baSitter/baUsrSitterBookingInst">
															<input type="hidden" id="basiSeqInput" name="basiSeq">
											<div class="mb-3">
												<div class="input-group mb-3">
													<input type="text" class="form-control bookinginput" id="baboDate" name="baboDate" placeholder="예약날짜"
														autocomplete="off" style="cursor: pointer; background-color: #fff;" readonly>
													<span class="input-group-text bg-transparent"> <i
														class="mdi mdi-calendar-month-outline"></i>
													</span>
												</div>
												<div class="input-group mb-3">
													<input type="text" class="form-control bookinginput" id="baboTime" name="baboTime" placeholder="예약시간"
														style="cursor: pointer; background-color: #fff;" autocomplete="off" readonly>
												</div>
												<div class="input-group mb-3">
													<input type="text" class="form-control" id="baboLocation" name="baboLocation" placeholder="돌봄장소" 
														style="cursor: pointer;" autocomplete="off" oninput="updateLocation()">
												</div>
											</div>
											<div class="mb-3">
												<label class="form-label">Option</label>
												<div th:each="list : ${opList}">
													<div class="input-group mb-3">
														<label class="form-control custom-checkbox"> 
															<input type="checkbox" id="checkbox1" name="optionSeqs" class="menu-checkbox" th:value="${list.baopSeq}" 
																th:attr="data-price=${list.baopPrice != null ? list.baopPrice : 0}" onchange="updateTotalPrice()">
															<input type="hidden" name="baboTotalPrice" id="baboTotalPriceInput">
															<div class="content">
																<p class="align-left">
																	<strong><span th:text="${list.baopName}">옵션이름</span></strong>
																</p>
																<div class="price-and-buttons">
																	<span th:text="${list.baopPrice} + 원">가격</span>
																</div>
															</div>
														</label>
													</div>
												</div>
												<br>
												<!-- total -->
												<div class="mb-3">
													<label class="form-label">Total</label>
													<div class="input-group mb-3">
														<p>
															<span>예약 날짜 : <span id="rvDate"></span></span> <br>
															<span>예약 시간 : <span id="rvTime"></span></span> <br>
															<span>돌봄 장소 : <span id="rvLocation"></span></span> <br> 
															<span>총금액 : <span id="baboTotalPrice">0</span>원</span>
														</p>
													</div>
												</div>
												<div class="mt-3 d-grid">
													<a class="btn text-center" id="btnBooking">
														<img src="/usr/v1/template/petxon/assets/img/icon/btn-pet-icon.png" alt="logo">예약하기
													</a>
												</div>
										</form>
										<!-- Vertically centered Modal -->
										<div class="modal fade" id="verticalycentered" tabindex="-1">
											<div class="modal-dialog modal-dialog-centered">
												<div class="modal-content">
													<div class="modal-header">
														<h5 class="modal-title">확인</h5>
														<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
													</div>
													<div class="modal-body">예약 내용을 모두 선택해 주세요</div>
													<div class="modal-footer">
														<button type="button" class="btn btn-primary"
															data-bs-dismiss="modal">확인</button>
													</div>
												</div>
											</div>
										</div>
										<!-- End Vertically centered Modal-->
									</div>
								</div>
							</section>
						</aside>
					</div>
					<!-- #right side end -->
				</div>
			</div>
		</section>
		<!-- inner-blog-end -->
	</main>
	<!-- main-area-end -->
	<!-- footer -->
	<footer class="footer-bg footer-p"
		style="background-color: #40332E; background-image: url(/usr/v1/template/petxon/assets/img/bg/footer-bg.png); background-repeat: no-repeat; background-size: cover;">
	</footer>
	<!-- footer-end -->


	<!-- JS here -->
	<script src="/usr/v1/js/fullcalendar/dist/index.global.min.js"></script>
	<script src="/usr/v1/js/fullcalendar/dist/index.global.js"></script>
	<script
		src="/usr/v1/js/datetimepicker/jquery.datetimepicker.full.min.js"></script>
	<script
		src="/xdm/v1/js/datetimepicker/jquery.datetimepicker.full.min.js"></script>
	<script
		src="/usr/v1/template/petxon/assets/js/vendor/modernizr-3.5.0.min.js"></script>
	<script src="/usr/v1/template/petxon/assets/js/vendor/jquery.min.js"></script>
	<script src="/usr/v1/template/petxon/assets/js/popper.min.js"></script>
	<script src="/usr/v1/template/petxon/assets/js/bootstrap.min.js"></script>
	<script src="/usr/v1/template/petxon/assets/js/slick.min.js"></script>
	<script src="/usr/v1/template/petxon/assets/js/ajax-form.js"></script>
	<script src="/usr/v1/template/petxon/assets/js/paroller.js"></script>
	<script src="/usr/v1/template/petxon/assets/js/wow.min.js"></script>
	<script src="/usr/v1/template/petxon/assets/js/js_isotope.pkgd.min.js"></script>
	<script src="/usr/v1/template/petxon/assets/js/imagesloaded.min.js"></script>
	<script src="/usr/v1/template/petxon/assets/js/parallax.min.js"></script>
	<script src="/usr/v1/template/petxon/assets/js/jquery.waypoints.min.js"></script>
	<script src="/usr/v1/template/petxon/assets/js/jquery.counterup.min.js"></script>
	<script src="/usr/v1/template/petxon/assets/js/jquery.scrollUp.min.js"></script>
	<script src="/usr/v1/template/petxon/assets/js/jquery.meanmenu.min.js"></script>
	<script src="/usr/v1/template/petxon/assets/js/parallax-scroll.js"></script>
	<script src="/usr/v1/template/petxon/assets/js/swiper.min.js"></script>
	<script
		src="/usr/v1/template/petxon/assets/js/jquery.magnific-popup.min.js"></script>
	<script src="/usr/v1/template/petxon/assets/js/element-in-view.js"></script>
	<script src="/usr/v1/template/petxon/assets/js/main.js"></script>
	<script src="/xdm/v1/jquery/jquery-3.7.1.min.js"></script>
	<script
		src="/usr/v1/template/NailForest/assets/libs/bootstrap-icons/font/bootstrap-icons.json"></script>

	<script
		src="/usr/v1/template/NailForest/assets/libs/jquery/dist/jquery.min.js"></script>
	<script
		src="/usr/v1/template/NailForest/assets/libs/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
	<script
		src="/usr/v1/template/NailForest/assets/libs/owl.carousel/dist/owl.carousel.min.js"></script>
	<script
		src="/usr/v1/template/NailForest/assets/libs/select2/dist/js/select2.full.min.js"></script>
	<script
		src="/usr/v1/template/NailForest/assets/libs/select2/dist/js/select2.min.js"></script>
	<script
		src="/usr/v1/template/NailForest/assets/libs/jquery-raty-js/lib/jquery.raty.js"></script>
	<script
		src="/usr/v1/template/NailForest/assets/libs/litepicker/dist/litepicker.js"></script>
	<script src="/usr/v1/template/NailForest/assets/libs/prismjs/prism.js"></script>
	<script
		src="/usr/v1/template/NailForest/assets/libs/leaflet/dist/leaflet.js"></script>
	<script
		src="/usr/v1/template/NailForest/assets/libs/magnific-popup/dist/jquery.magnific-popup.min.js"></script>
	<script
		src="/usr/v1/template/NailForest/assets/libs/nouislider/dist/nouislider.min.js"></script>
	<script
		src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.5.12/clipboard.min.js"></script>
	<!-- Theme JS -->
	<script src="/usr/v1/template/NailForest/assets/js/theme.min.js"></script>
	<script
		src="/xdm/v1/js/datetimepicker/jquery.datetimepicker.full.min.js"></script>


	<script type="text/javascript">
		// ========== Datetimepicker START ========== //
		// 예약 날짜,시간 검색 - datetimepicker
		window.addEventListener('load', function() {
			$.datetimepicker.setLocale('ko');

			// 날짜 선택 필드 초기화
			$("#baboDate").datetimepicker({
				timepicker : false, // 시간 선택 비활성화
				format : 'Y-m-d' // 날짜 형식
			}).on('change', function() {
				// 날짜 선택 시 rvDate에 값 반영
				const selectedDate = $(this).val();
				$('#rvDate').text(selectedDate);
			});

			// 시간 선택 필드 초기화
			$("#baboTime").datetimepicker({
				datepicker : false, // 날짜 선택 비활성화
				timepicker : true, // 시간 선택 활성화
				format : 'H:i', // 시간 형식 (24시간제)
				step : 30
			// 30분 단위
			}).on('change', function() {
				// 시간 선택 시 rvTime에 값 반영
				const selectedTime = $(this).val();
				$('#rvTime').text(selectedTime);
			});
		});
		// ========== Datetimepicker END ========== //

		
		
		// ========== Location START ========== //
		// 예약하기에서 돌봄장소를 입력하면 total에 입력한 내용 출력
		function updateLocation() {
		   	// baboLocation input 태그에 입력된 값을 가져옴
		    const locationInput = document.getElementById("baboLocation").value;
		
		   	// 출력 요소 rvLocation에 baboLocation 값 업데이트
		    document.getElementById("rvLocation").textContent = locationInput;
		}
		// ========== Location END ========== //
		
		
		
		// ========== 선택옵션 가격 합산, seq 처리 START ========== //
		// 옵션 가격 합산 및 선택된 옵션 seq 처리
		function updateTotalPrice(){
			let total = 0;	// 총 금액 초기화
			let selectedOptionSeqs = [];	// 선택된 옵션 seq 배열 초기화
			
			// 선택된 체크박스들의 데이터(가격, seq) 처리
			document.querySelectorAll('.menu-checkbox:checked').forEach(checkbox => {
				const price = checkbox.getAttribute('data-price');	// data-price 읽기
				console.log('data-price:', price);	// 디버깅 출력
				
				const priceValue = isNaN(price) || price === null || price === '' ? 0 : parseInt(price, 10);	// Nan  방지
				
				total += priceValue; // 총 금액 합산
				
				selectedOptionSeqs.push(checkbox.value); // 메뉴 seq 저장
			});
			
			// 총 금액을 화면에 표시
			document.getElementById('baboTotalPrice').textContent = total.toLocaleString(); // 숫자 형식화
			
			// 총 금액을 hidden 필드에 설정
			document.getElementById('baboTotalPriceInput').value = total;
			
			// 선택된 메뉴 seq를 디버깅 로그로 출력
			console.log('선택된 옵션 seq:', selectedOptionSeqs);
			console.log('총 금액:', total);
		}
		// ========== 선택옵션 가격 합산, seq 처리 END ========== //
		

		
		// ========== 예약하기 버튼 START ========== //
		// basiSeq 값 전달
		document.addEventListener('DOMContentLoaded', () => {	//URL에서 basiSeq 값을 가져와 숨겨진 필드에 설정
			const urlParams = new URLSearchParams(window.location.search);	// URL에서 basiSeq 값 추출
			const basiSeq = urlParams.get('basiSeq');	// basiSeq 값 반환
			if(basiSeq){	//URL에서 basiSeq 값을 가져와 숨겨진 필드에 설정
				document.querySelector('input[name="basiSeq"]').value = basiSeq;
			}
			console.log("basiSeq: " + basiSeq);
		});
		
		// 예약하기 버튼 - insert
		document.getElementById('btnBooking').onclick = function(){
			
			// 예약날짜, 예약시간, 돌봄장소 가져오기
			const baboDate = document.getElementById('baboDate').value;
			const baboTime = document.getElementById('baboTime').value;
			const baboLocation = document.getElementById('baboLocation').value;
			
			// 옵션 체크박스 선택여부 확인
			const optionCheckboxes = document.querySelectorAll('.menu-checkbox');
			const isOptionSelected = Array.from(optionCheckboxes).some(checkbox => checkbox.checked);
			
			// 모든 조건 확인
			if(!baboDate || !baboTime || !baboLocation || !isOptionSelected){
				// 조건을 만족하지 않으면 모달 표시
				const modal = new bootstrap.Modal(document.getElementById('verticalycentered'));
				modal.show();
			} else {
				// 조건을 만족하면 폼으로 전송
				document.forms['bookingForm'].action = "/usr/v1/infra/baSitter/baUsrSitterBookingInst";
				document.forms['bookingForm'].submit();
			}
		}
		// ========== 예약하기 버튼 END ========== //
		
		
		
		// ========== 리뷰 별 적용 START ========== //
		// 리뷰 별
		const rwStars = document.querySelectorAll('#bareStar .star');
		
		// 선택된 별점 값을 저장하는 변수
		let selectedValue = 0;
		
		// 별에 마우스 올렸을 때 해당 별과 왼쪽 별들 채우기
		rwStars.forEach(star => {
		    star.addEventListener('mouseover', () => {
		        const value = parseInt(star.getAttribute('data-value'));
		        rwStars.forEach((s, index) => {
		            if (index < value) {
		                s.style.color = 'rgba(250, 208, 0, 0.99)'; // 별을 금색으로
		            } else {
		                s.style.color = 'rgba(211, 211, 211, 1)'; // 나머지는 회색
		            }
		        });
		    });
		
		    // 마우스가 별 밖으로 나가면 선택된 상태 유지
		    star.addEventListener('mouseout', () => {
		        rwStars.forEach((s, index) => {
		            if (index < selectedValue) {
		                s.style.color = 'rgba(250, 208, 0, 0.99)'; // 선택된 별을 금색으로
		            } else {
		                s.style.color = 'rgba(211, 211, 211, 1)'; // 나머지는 회색
		            }
		        });
		    });
		
		    // 별 클릭 시 선택 상태 저장 및 유지
		    star.addEventListener('click', () => {
		        selectedValue = parseInt(star.getAttribute('data-value')); // 선택된 값 저장
		        rwStars.forEach((s, index) => {
		            if (index < selectedValue) {
		                s.style.color = 'rgba(250, 208, 0, 0.99)'; // 선택된 별을 금색으로
		            } else {
		                s.style.color = 'rgba(211, 211, 211, 1)'; // 나머지는 회색
		            }
		        });
		        // selectedValue에 저장된 별점 값 html 필드에 설정
		        document.getElementById("reStarInput").value = selectedValue;
		    });
		});
	 	// ========== 리뷰 별 적용 END ========== //
	 	
	    // ========== 리뷰 insert START ========== //
	    document.addEventListener('DOMContentLoaded', () => {
			const urlParams = new URLSearchParams(window.location.search);
		    const basiSeq = urlParams.get('basiSeq');
		    if (basiSeq) {
		    	document.querySelector('input[name="basiSeq"]').value = basiSeq;
			}
			console.log("basiSeq: " + basiSeq);
		});
	    
	    document.getElementById('reviewSaveBtn').onclick = function() {
	    	const basiSeq = document.querySelector('input[name="basiSeq"]').value;
	    	if (selectedValue > 0) {
	    		$.ajax({
	    			async: true,
	    			cache: false,
					url: '/usr/v1/infra/baSitter/baUsrReInst',
					type:"POST",
					data : {
						bareContents : $("#bareContents").val(),
						bareStar : selectedValue,
						basiSeq : basiSeq
					},
	// 				contentType:"application/json; charset=utf-8",
					success: function(response, textStatus, xhr){
						console.log("서버 응답:", response);  // 응답 전체 확인
				        console.log("응답 상태:", textStatus);  // 응답 상태 확인
				        console.log("HTTP 상태 코드:", xhr.status);  // HTTP 상태 코드 확인
						
						if (response.rt == "success") {
							alert("리뷰전송완료");
							  
							let reviews = '';
							reviews +=	'<div class="comments-avatar">';
							reviews +=		'<img src="/usr/v1/template/petxon/assets/img/blog/comment/c_01.png" alt="">';
							reviews +=	'</div>';
							reviews +=	'<div class="comment-text">';
							reviews +=		'<div class="avatar-name mb-1">';
	                        reviews +=			'<span>' + (response.bareRegDate != null ? formatDate(response.bareRegDate) : 'null') + '</span>';
	                        reviews +=				'<div class="rating">' + (response.bareStar);
// 							reviews +=				'<div class="rating">';
// 							const bareStar = response.bareStar || 0;
	                        // 별점 표시 부분 (1부터 5까지 반복)
	                        for (let i = 1; i <= 5; i++) {
	                            if (i <= response.bareStar) {
	                                reviews +=            '<span style="color: gold;">&#9733;</span>'; // 금색 별
	                            } else {
	                                reviews +=            '<span style="color: gray;">&#9734;</span>'; // 회색 빈 별
	                            }
	                        }
	                       	reviews +=					'<span>';
							reviews +=				'<div>';
							reviews +=			'<div>';
							reviews +=			'<p>' + (response.bareContents) + '</p>'							
							$("#reviews").append(reviews);
							
							// 입력창초기화
			                $("#bareContents").val('');
			                
			                selectedValue = 0; // 별점 초기화
		                    rwStars.forEach(star => {
		                        star.style.color = 'transparent'; // 별 초기화
		                    });
						} else {
							alert("리뷰저장실패");	// insert 실패 시 alert 창을 띄움
						}
					},
					error: function(xhr, status, error) {
		                console.error("AJAX 오류: " + status + " " + error);
		                alert("리뷰 전송 중 오류가 발생했습니다.");
		            }
	// 					console.log("result: " + result);
	// 					self.location.reload();
					}
				)};
	    };
		// ========== 리뷰 insert END ========== //
		
		
		
		// ========== aa START ========== //
		// ========== aa END ========== //
		
		
		
		// ========== aa START ========== //
		// ========== aa END ========== //
	</script>


</body>

</html>